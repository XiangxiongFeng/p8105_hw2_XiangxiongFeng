---
title: "HW2"
author: "Xiangxiong Feng"
date: "2023-10-02"
output: github_document
---


# Problem 1

```{r}
library(tidyverse)
```
## clean the data in pols-month.csv

```{r}
polsmonth_df = 
  read_csv('data/pols-month.csv') |>
  janitor:: clean_names() |>
  separate(mon, into = c('year', 'month'), sep = 4) |>
  separate(month, into = c('month', 'day'), sep = 3) |>
  mutate(
    month = replace(month, month == '-01', 'Jan'),
    month = replace(month, month == '-02', 'Feb'),
    month = replace(month, month == '-03', 'Mar'),
    month = replace(month, month == '-04', 'Apr'),
    month = replace(month, month == '-05', 'May'),
    month = replace(month, month == '-06', 'Jun'),
    month = replace(month, month == '-07', 'Jul'),
    month = replace(month, month == '-08', 'Aug'),
    month = replace(month, month == '-09', 'Sep'),
    month = replace(month, month == '-10', 'Oct'),
    month = replace(month, month == '-11', 'Noc'),
    month = replace(month, month == '-12', 'Dec'),
    month = str_to_upper(month)
  ) |>
  rename(president = prez_dem) |>
  mutate(
    president = replace(president, president == '0', 'gop'),
    president = replace(president, president == '1', '0'),
    president = replace(president, president == 'gop', '1')
    ) |>
  select(-prez_gop,-day)
  
  
```

## clean data in snp.csv

```{r}
library(lubridate)
library(dplyr)
snp_df = 
  read_csv('data/snp.csv') |>
  janitor::clean_names() |>
  mutate(
    date = parse_date_time(date, order = c('mdy'))) |>
  separate(date, into = c('year', 'month'), sep = 4) |>
  separate(month, into = c('month', 'day'), sep = 3) |>
  mutate(
    month = replace(month, month == '-01', 'Jan'),
    month = replace(month, month == '-02', 'Feb'),
    month = replace(month, month == '-03', 'Mar'),
    month = replace(month, month == '-04', 'Apr'),
    month = replace(month, month == '-05', 'May'),
    month = replace(month, month == '-06', 'Jun'),
    month = replace(month, month == '-07', 'Jul'),
    month = replace(month, month == '-08', 'Aug'),
    month = replace(month, month == '-09', 'Sep'),
    month = replace(month, month == '-10', 'Oct'),
    month = replace(month, month == '-11', 'Noc'),
    month = replace(month, month == '-12', 'Dec'),
    month = str_to_upper(month)) |>
  select(-day)
  



```


## clean data in unemployment.csv

```{r}
unemployment_df = 
  read_csv('data/unemployment.csv') |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = 'month',
    values_to = 'unemployment_rate'
  ) |>
  mutate(
    month = str_to_upper(month),
  
  )

```
## Joining dataset

```{r}
pol_snp_df = 
  left_join(polsmonth_df,snp_df ) |>
  mutate(year = as.numeric(year))

final_df =
  left_join(pol_snp_df, unemployment_df)
```

The final dataset includes 11 variables, some important variables are year, month
and unemployment rate. The range of the year is from 1947 to 2015.





# Problem 2 

#import and clean Mr. Trash Wheel

```{r}
library( readxl)
Mr.Trash_wheel_df = 
  read_excel('data/202309 Trash Wheel Collection Data.xlsx', sheet = 'Mr. Trash Wheel') |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    homes_powered = (weight_tons*500)/30,
    Wheel_Type = 'Mr.Trash Wheel',
    year = as.numeric(year)
  )

sum(Mr.Trash_wheel_df$weight_tons)

```

# import and clean Professor Trash Wheel

```{r}
Professor_Trash_df = 
  read_excel('data/202309 Trash Wheel Collection Data.xlsx', sheet = 'Professor Trash Wheel') |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    homes_powered = (weight_tons*500)/30,
    Wheel_Type = 'Professor Trash Wheel'
  )

```


# Import and clean Gwynnda Trash Wheel

```{r}
Gwynnda_Trash_df = 
  read_excel('data/202309 Trash Wheel Collection Data.xlsx', sheet = 'Gwynnda Trash Wheel') |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    homes_powered = (weight_tons*500)/30,
    Wheel_Type = 'Gwynnda Trash Wheel'
  )

Number_cigarette =
  filter(Gwynnda_Trash_df, year==2021, month == 'July') 
sum(Number_cigarette$cigarette_butts)

```

# Combine dataset to produce a single tidydataset

```{r}
# join Mr.Trash_wheel_df and Professor_Trash_df
T_TrashWheel_df = 
  full_join(Mr.Trash_wheel_df, Professor_Trash_df)

#join Gwynnda_Trash_df into result above to gain final data
Final_TrashWheel_df =
  full_join(T_TrashWheel_df, Gwynnda_Trash_df) |>
  select(Wheel_Type, everything()) |>
  select(-month, -year)

  


  
```
Description:

There are 845 observation in the resulting dataset. Some key variables includes Wheel_Type, which shows which type the trash wheel is; Homes Powered, which is 
calculate from Weight and average household energy usage; data, which shows data information. By the available data, the total weight of trash collected by 
Professor Trash Wheel is 1875.1. The total number of cigarette butts collected 
by Gwynnda in July of 2021 is 16300.





